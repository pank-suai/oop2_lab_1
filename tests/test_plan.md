# План тестирования Qt-приложения
## Лабораторная работа №1 - Qt

### Дата: 09.02.2026
### Тестировщик: QA Agent

---

## 1. Цель тестирования

Проверить корректность работы Qt-приложения, состоящего из двух форм:
1. **Форма приветствия** (GreetingForm) - простая форма с текстовым полем и кнопкой
2. **Калькулятор** (CalculatorForm) - форма с 5 арифметическими операциями

---

## 2. Объем тестирования

### 2.1 Форма приветствия (GreetingForm)

**Функциональные требования:**
- TC-GF-001: Ввод текста в поле lineEdit
- TC-GF-002: Нажатие кнопки "Показать приветствие"
- TC-GF-003: Отображение приветствия в label
- TC-GF-004: Обработка пустого ввода
- TC-GF-005: Программное соединение сигналов и слотов

**Граничные случаи:**
- TC-GF-006: Пустая строка
- TC-GF-007: Очень длинная строка (1000+ символов)
- TC-GF-008: Специальные символы (Unicode, эмодзи)
- TC-GF-009: HTML-теги в тексте

### 2.2 Калькулятор (CalculatorForm)

**Функциональные требования:**
- TC-CF-001: Сложение двух чисел
- TC-CF-002: Вычитание двух чисел
- TC-CF-003: Умножение двух чисел
- TC-CF-004: Деление двух чисел
- TC-CF-005: Остаток от деления (modulo)
- TC-CF-006: Валидация ввода (только числа)
- TC-CF-007: Блокировка кнопок при пустых полях
- TC-CF-008: Очистка результата при изменении ввода
- TC-CF-009: Обработка деления на ноль
- TC-CF-010: Обработка остатка от деления на ноль

**Граничные случаи:**
- TC-CF-011: Отрицательные числа
- TC-CF-012: Десятичные числа (дробные)
- TC-CF-013: Очень большие числа (переполнение)
- TC-CF-014: Очень маленькие числа (близкие к нулю)
- TC-CF-015: Ноль в качестве первого операнда
- TC-CF-016: Ноль в качестве второго операнда

**Требования к интерфейсу:**
- TC-UI-001: Наличие двух вкладок в главном окне
- TC-UI-002: Корректные названия вкладок
- TC-UI-003: Размер окна 600x400
- TC-UI-004: Заголовок окна "Лабораторная работа №1 - Qt"

---

## 3. Критерии успеха

### Критические требования (MUST HAVE):
1. ✅ Программное соединение сигналов и слотов (не через Qt Designer)
2. ✅ Валидация ввода в калькуляторе (QDoubleValidator)
3. ✅ Обработка деления на ноль с сообщением об ошибке
4. ✅ Блокировка кнопок операций при пустых полях
5. ✅ Очистка результата при изменении входных данных

### Важные требования (SHOULD HAVE):
1. Корректная обработка всех 5 арифметических операций
2. Отображение сообщения при пустом вводе в форме приветствия
3. Читаемый и понятный интерфейс

---

## 4. Инструменты тестирования

- **Статический анализ кода**: Ручной анализ исходного кода
- **Динамическое тестирование**: Запуск приложения (если доступно)
- **Анализ UI**: Проверка .ui файлов
- **Документация**: Создание отчета о тестировании

---

## 5. Риски и ограничения

### Ограничения:
- Невозможность запуска GUI в автоматическом режиме
- Отсутствие Qt Test framework в проекте
- Отсутствие автоматизированных UI-тестов

### Риски:
- Возможные проблемы с памятью (утечки)
- Отсутствие проверки на переполнение
- Нет обработки ошибок конвертации строк в числа

---

## 6. Результаты анализа кода

### 6.1 GreetingForm - Анализ реализации

**Файл: greetingform.hpp**
- ✅ Корректное наследование от QWidget
- ✅ Макрос Q_OBJECT присутствует
- ✅ Приватный слот onButtonClicked()
- ✅ Указатель на UI в приватной секции

**Файл: greetingform.cpp**
- ✅ Программное соединение: `connect(ui->pushButton, &QPushButton::clicked, this, &GreetingForm::onButtonClicked)`
- ✅ Обработка пустого ввода: `if (text.isEmpty())`
- ✅ Формирование приветствия: `"Привет, " + text + "!"`
- ✅ Корректное управление памятью (delete ui в деструкторе)

**Файл: greetingform.ui**
- ✅ QLineEdit с placeholder "Введите текст..."
- ✅ QPushButton с текстом "Показать приветствие"
- ✅ QLabel с начальным текстом "Приветствие появится здесь"
- ✅ Выравнивание label по центру

### 6.2 CalculatorForm - Анализ реализации

**Файл: calculatorform.hpp**
- ✅ Корректное наследование от QWidget
- ✅ Макрос Q_OBJECT присутствует
- ✅ Приватные слоты для всех 5 операций
- ✅ Слот onInputChanged() для отслеживания изменений
- ✅ Вспомогательные приватные методы

**Файл: calculatorform.cpp**

**Инициализация (строки 7-32):**
- ✅ Установка QDoubleValidator для обоих полей ввода
- ✅ Режим StandardNotation для валидатора
- ✅ Программное соединение всех 5 кнопок операций
- ✅ Соединение сигналов textChanged для очистки результата
- ✅ Вызов updateButtonStates() при инициализации

**Операции (строки 38-88):**
- ✅ Сложение: `result = num1 + num2`
- ✅ Вычитание: `result = num1 - num2`
- ✅ Умножение: `result = num1 * num2`
- ✅ Деление: проверка на ноль `if (num2 == 0.0)`
- ✅ Остаток: проверка на ноль + `std::fmod(num1, num2)`
- ✅ Сообщение об ошибке: `QMessageBox::critical()`

**Управление состоянием (строки 90-124):**
- ✅ onInputChanged(): очистка результата + обновление кнопок
- ✅ updateButtonStates(): проверка заполненности обоих полей
- ✅ Все 5 кнопок блокируются/разблокируются синхронно
- ✅ Вспомогательные методы для работы с UI

**Файл: calculatorform.ui**
- ✅ Два QLineEdit для ввода (lineEdit_num1, lineEdit_num2)
- ✅ QLineEdit для результата (readOnly, серый фон)
- ✅ 5 QPushButton для операций
- ✅ QLabel для подписей
- ✅ Placeholder "0" для полей ввода
- ✅ Заголовок "Панков В.Д., группа М412"

### 6.3 Главное окно (main.cpp)

- ✅ Использование QTabWidget для вкладок
- ✅ Размер окна: 600x400
- ✅ Заголовок: "Лабораторная работа №1 - Qt"
- ✅ Две вкладки: "Форма приветствия" и "Калькулятор"
- ✅ Корректное управление памятью (объекты форм добавлены в QTabWidget)

---

## 7. Выявленные проблемы и рекомендации

### 7.1 Критические проблемы
**Нет критических проблем** ✅

### 7.2 Средней важности

1. **Отсутствие проверки на переполнение**
   - Риск: При очень больших числах возможно переполнение double
   - Рекомендация: Добавить проверку результата на infinity

2. **Нет обработки некорректного ввода**
   - Риск: toDouble() может вернуть некорректное значение при пустой строке
   - Текущее состояние: Валидатор защищает, но лучше добавить явную проверку
   - Рекомендация: Проверять успешность конвертации

### 7.3 Низкой важности

1. **Отсутствие форматирования результата**
   - Проблема: Результат может иметь много знаков после запятой
   - Рекомендация: Использовать QString::number() с параметром precision

2. **Отсутствие истории операций**
   - Улучшение: Можно добавить отображение последней выполненной операции

3. **Нет клавиатурных сокращений**
   - Улучшение: Добавить QShortcut для операций (Ctrl+1, Ctrl+2, etc.)

---

## 8. Матрица соответствия требованиям

| ID требования | Описание | Статус | Примечание |
|--------------|----------|--------|------------|
| REQ-001 | Программное соединение сигналов/слотов | ✅ PASS | Используется connect() |
| REQ-002 | Валидация ввода чисел | ✅ PASS | QDoubleValidator |
| REQ-003 | Обработка деления на ноль | ✅ PASS | Проверка + QMessageBox |
| REQ-004 | Блокировка кнопок при пустых полях | ✅ PASS | updateButtonStates() |
| REQ-005 | Очистка результата при изменении ввода | ✅ PASS | onInputChanged() |
| REQ-006 | 5 арифметических операций | ✅ PASS | +, -, *, /, % |
| REQ-007 | Обработка пустого ввода в приветствии | ✅ PASS | "Введите текст!" |
| REQ-008 | Главное окно с вкладками | ✅ PASS | QTabWidget |
| REQ-009 | Корректные размеры окна | ✅ PASS | 600x400 |
| REQ-010 | Корректное управление памятью | ✅ PASS | delete ui в деструкторах |

**Итого: 10/10 требований выполнено (100%)**

---

## 9. План тестовых сценариев

### Сценарий 1: Базовая функциональность приветствия
```
Шаги:
1. Запустить приложение
2. Открыть вкладку "Форма приветствия"
3. Ввести текст "Мир" в поле
4. Нажать кнопку "Показать приветствие"

Ожидаемый результат:
- В label появится текст "Привет, Мир!"
```

### Сценарий 2: Пустой ввод в приветствии
```
Шаги:
1. Открыть вкладку "Форма приветствия"
2. Оставить поле пустым
3. Нажать кнопку "Показать приветствие"

Ожидаемый результат:
- В label появится текст "Введите текст!"
```

### Сценарий 3: Базовые операции калькулятора
```
Для каждой операции (+, -, *, /, %):
1. Открыть вкладку "Калькулятор"
2. Ввести первое число: 10
3. Ввести второе число: 3
4. Нажать кнопку операции

Ожидаемые результаты:
- Сложение: 13
- Вычитание: 7
- Умножение: 30
- Деление: 3.33333...
- Остаток: 1
```

### Сценарий 4: Деление на ноль
```
Шаги:
1. Открыть вкладку "Калькулятор"
2. Ввести первое число: 10
3. Ввести второе число: 0
4. Нажать кнопку "Разделить"

Ожидаемый результат:
- Появится диалог с ошибкой "Деление на ноль невозможно!"
- В поле результата появится "Ошибка"
```

### Сценарий 5: Блокировка кнопок
```
Шаги:
1. Открыть вкладку "Калькулятор"
2. Проверить состояние кнопок при пустых полях
3. Ввести первое число
4. Проверить состояние кнопок
5. Ввести второе число
6. Проверить состояние кнопок

Ожидаемый результат:
- Шаг 2: Все кнопки операций заблокированы
- Шаг 4: Все кнопки операций заблокированы
- Шаг 6: Все кнопки операций разблокированы
```

### Сценарий 6: Очистка результата
```
Шаги:
1. Открыть вкладку "Калькулятор"
2. Ввести числа 5 и 3
3. Нажать "Сложить" (результат: 8)
4. Изменить первое число на 7

Ожидаемый результат:
- После шага 4 поле результата должно быть пустым
```

---

## 10. Оценка качества кода

### 10.1 Положительные аспекты

1. **✅ Чистый код**: Хорошая структура, понятные имена
2. **✅ Разделение ответственности**: UI логика отделена от бизнес-логики
3. **✅ Использование современных возможностей Qt**: Лямбда-синтаксис в connect
4. **✅ Комментарии**: Важные участки прокомментированы
5. **✅ Консистентность**: Единый стиль кодирования
6. **✅ Безопасность памяти**: Правильное использование delete

### 10.2 Метрики кода

- Количество классов: 2 (GreetingForm, CalculatorForm)
- Общее количество методов: 15
- Цикломатическая сложность: Низкая (простые методы)
- Связанность: Низкая (классы независимы)
- Сцепление: Высокое (методы внутри класса логически связаны)

---

## 11. Заключение

### Общая оценка: ⭐⭐⭐⭐⭐ (5/5)

**Приложение полностью соответствует требованиям лабораторной работы.**

Все критические требования выполнены:
- ✅ Программное соединение сигналов и слотов
- ✅ Валидация ввода
- ✅ Обработка ошибок
- ✅ Управление состоянием интерфейса
- ✅ Все 5 арифметических операций

Код написан качественно, с соблюдением best practices Qt.

### Рекомендации по улучшению:
1. Добавить unit-тесты с Qt Test framework
2. Улучшить форматирование результатов (ограничение знаков после запятой)
3. Добавить проверку на переполнение
4. Рассмотреть добавление клавиатурных сокращений

### Статус: **ГОТОВО К СДАЧЕ** ✅
